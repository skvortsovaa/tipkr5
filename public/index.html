<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Генератор случайных аватаров</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <div class="page">
    <header class="header">
      <h1 class="title">Генератор случайных аватаров</h1>
      <p class="subtitle">
        Нажмите кнопку ниже, чтобы получить случайный аватар из коллекции.
      </p>
    </header>

    <main class="content">
      <section class="controls">
        <button id="gen" class="button button_primary">
          Сгенерировать аватар
        </button>
      </section>

      <section class="card">
        <h2 class="card__title">Текущий аватар</h2>
        <div id="avatarWrapper" class="avatar-wrapper">
          <img
            id="avatarImg"
            alt="Случайный аватар"
            class="avatar-img"
          />
          <p id="avatarPlaceholder" class="avatar-placeholder">
            Аватар пока не сгенерирован
          </p>
        </div>
      </section>
    </main>

    <footer class="footer">
      <span class="footer__text">
        Express.js · Вариант 25 · Скворцов Александр ЭФБО-07-24
      </span>
    </footer>
  </div>

  <script>
    document.getElementById('gen').addEventListener('click', async () => {
      const res = await fetch('/api/avatar/random');
      const av = await res.json();

      const img = document.getElementById('avatarImg');
      const placeholder = document.getElementById('avatarPlaceholder');

      img.src = av.image;
      img.style.width = av.size + "px";
      img.style.height = av.size + "px";

      // показываем картинку, прячем заглушку
      img.style.display = 'block';
      placeholder.style.display = 'none';
    });
  </script>

</body>
</html>
